entity:
  name: ExercisePlanVariant
  tableName: exercise_plan_variants
  description: Join table linking variants to exercise plans

fields:
  - name: exercisePlanId
    type: String
    tableType: text()
    reference:
      table: ExercisePlans
      column: id

  - name: variantId
    type: String
    tableType: text()
    reference:
      table: Variants
      column: id

indexes:
  - name: idx_exercise_plan_variants_plan
    columns: [exercisePlanId]
  - name: idx_exercise_plan_variants_variant
    columns: [variantId]
  - name: idx_exercise_plan_variants_unique
    columns: [exercisePlanId, variantId]

queries:
  - name: findByExercisePlanId
    params:
      - name: exercisePlanId
        type: String
    returns: List<ExercisePlanVariantData>
    where: t.exercisePlanId.equals(exercisePlanId) & t.deletedAt.isNull()

  - name: findByVariantId
    params:
      - name: variantId
        type: String
    returns: List<ExercisePlanVariantData>
    where: t.variantId.equals(variantId) & t.deletedAt.isNull()

createFactory:
  params:
    - exercisePlanId
    - variantId
